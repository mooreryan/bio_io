<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fasta_in_channel (bio_io.Bio_io.Fasta_in_channel)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">bio_io</a> &#x00BB; <a href="../index.html">Bio_io</a> &#x00BB; Fasta_in_channel</nav><h1>Module <code>Bio_io.Fasta_in_channel</code></h1><nav class="toc"><ul><li><a href="#overview">Overview</a><ul><li><a href="#quick-start">Quick start</a></li><li><a href="#function-flavors">Function flavors</a></li></ul></li><li><a href="#examples">Examples</a><ul><li><a href="#return-all-records-in-a-list">Return all records in a list</a></li><li><a href="#iterating-over-records">Iterating over records</a></li><li><a href="#folding-over-records">Folding over records</a></li><li><a href="#pipelines">Pipelines with records</a></li></ul></li><li><a href="#api">API</a><ul><li><a href="#open/close">Open/Close</a></li><li><a href="#utilities">Utilities</a></li><li><a href="#getting_records">Getting records</a><ul><li><a href="#list_of_t">As list</a></li><li><a href="#sequence_of_t">As sequence</a></li></ul></li><li><a href="#folding">Folding over records</a><ul><li><a href="#with-index">With index</a></li></ul></li><li><a href="#iter">Iterating over records</a><ul><li><a href="#with-index">With index</a></li></ul></li></ul></li></ul></nav></header><aside><p>An input channel for reading FASTA files.</p></aside><section><header><h2 id="overview"><a href="#overview" class="anchor"></a>Overview</h2></header><section><header><h3 id="quick-start"><a href="#quick-start" class="anchor"></a>Quick start</h3><ul><li>To get a list of records, use <a href="index.html#val-records"><code>records</code></a> or <a href="index.html#val-with_file_records"><code>with_file_records</code></a>.</li><li>To get a sequence of records, use: <a href="index.html#val-record_sequence"><code>record_sequence</code></a> or <code>with_file_record_sequence</code>.</li><li>To fold over records, use: <a href="index.html#val-fold_records"><code>fold_records</code></a> or <a href="index.html#val-with_file_fold_records"><code>with_file_fold_records</code></a>.</li><li>To iterate over records, use: <a href="index.html#val-iter_records"><code>iter_records</code></a> or <a href="index.html#val-with_file_iter_records"><code>with_file_iter_records</code></a>.</li></ul><p>For some more info, check out the <a href="index.html#examples"><span>usage examples</span></a>.</p></header></section><section><header><h3 id="function-flavors"><a href="#function-flavors" class="anchor"></a>Function flavors</h3><p>Most functions in this module come in a few different flavors.</p><ul><li>Functions with <code>with_file_</code> prefix</li><li>Functions with the <code>_exn</code> suffix</li><li>Functions that return <code>Or_error.t</code></li></ul><p>Functions that have the <code>with_file_</code> prefix in their name take a filename <code>string</code> rather than a <code>Fasta_in_channel.t</code>. They are a convenient way to avoid wrapping your all your code in <a href="index.html#val-with_file"><code>with_file</code></a> function calls.</p><p>Functions that the <code>_exn</code> suffix in their name may raise exceptions, either from logic specific to this module, or from calls to other <code>Core_kernel</code> functions.</p><p>Functions that return <code>Or_error.t</code> catch <i>all</i> exceptions, even those not originating in the logic of this module. These functions shouldn't raise in practice. In other words, if you aren't using a function with <code>_exn</code> in the name, and you get an exception, then you have found a bug.</p><p>Here is an example of the different &quot;flavors&quot; of <a href="index.html#val-fold_records"><code>fold_records</code></a>:</p><ul><li><code>fold_records</code>: the normal <code>Fasta_in_channel.t</code> accepting, <code>Or_error.t</code> returning flavor</li><li><code>fold_records_exn</code>: takes <code>Fasta_in_channel.t</code> but may raise exceptions instead of returning <code>Or_error.t</code></li><li><code>with_file_fold_records</code>: takes a file name (<code>string</code>) rather than a <code>Fasta_in_channel.t</code>, and returns <code>Or_error.t</code></li><li><code>with_file_fold_records_exn</code>: takes a file name (<code>string</code>) rather than a <code>Fasta_in_channel.t</code>, and may raise exceptions</li></ul></header></section></section><section><header><h2 id="examples"><a href="#examples" class="anchor"></a>Examples</h2></header><section><header><h3 id="return-all-records-in-a-list"><a href="#return-all-records-in-a-list" class="anchor"></a>Return all records in a list</h3><p>Simplest way. May raise exceptions.</p><pre><code class="ml">let records = Fasta_in_channel.with_file_records_exn fname </code></pre><p>A bit more involved, but you won't get exceptions. Instead, you have to handle the <code>Or_error.t</code>. One reason to do this is to give the user nicer error messages.</p><pre><code class="ml">let records =
  match Fasta_in_channel.with_file_records name with
  | Error err -&gt;
      eprintf &quot;Problem reading records: %s\n&quot; (Error.to_string_hum err);
      exit 1
  | Ok records -&gt; records</code></pre></header></section><section><header><h3 id="iterating-over-records"><a href="#iterating-over-records" class="anchor"></a>Iterating over records</h3><p>Use the <code>iter</code> functions when you need to go over each record and perform some side-effects with them.</p><p>Print sequence IDs and sequence lengths</p><pre><code class="ml">let () =
  Fasta_in_channel.with_file_iter_records_exn &quot;sequences.fasta&quot;
    ~f:(fun record -&gt;
      let open Fasta_record in
      printf &quot;%s =&gt; %d\n&quot; (id record) (String.length (seq record)))</code></pre><p>Print sequence index, IDs, and sequence lengths.</p><p>This is like the last example except that we also want to print the index. The first record is 0, the 2nd is 1, etc.</p><pre><code class="ml">let () =
  Fasta_in_channel.with_file_iteri_records_exn &quot;sequences.fasta&quot;
    ~f:(fun index record -&gt;
      let open Fasta_record in
      printf &quot;%d: %s =&gt; %d\n&quot; (index + 1) (id record)
        (String.length (seq record)))</code></pre></header></section><section><header><h3 id="folding-over-records"><a href="#folding-over-records" class="anchor"></a>Folding over records</h3><p>If you need to reduce all the records down to a single value, use the <code>fold</code> functions.</p><p>Get total length of all sequences in the file.</p><p>Watch out as this may raise exceptions...see the <code>_exn</code> suffix.</p><pre><code class="ml">let total_length =
  Fasta_in_channel.with_file_fold_records_exn &quot;sequences.fasta&quot; ~init:0
    ~f:(fun length record -&gt;
      let sequence = Fasta_record.seq record in
      length + String.length sequence)</code></pre><p>Same thing, but this won't raise exceptions. You do have to handle <code>Or_error.t</code> to get the final value. Note that within the fold function, you get <code>Fasta_record.t</code> and not <code>Fasta_record.t Or_error.t</code>.</p><pre><code class="ml">let total_length =
  match
    Fasta_in_channel.with_file_fold_records name ~init:0
      ~f:(fun length record -&gt;
        length + String.length (Fasta_record.seq record))
  with
  | Error err -&gt;
      eprintf &quot;Problem reading records: %s\n&quot; (Error.to_string_hum err);
      exit 1
  | Ok total_length -&gt; total_length</code></pre></header></section><section><header><h3 id="pipelines"><a href="#pipelines" class="anchor"></a>Pipelines with records</h3><p>Sometimes you have a &quot;pipeline&quot; of computations that you need to do one after the other on records. In that case, use the <code>sequence</code> functions.</p><p>You <i>could</i> use <code>Lists</code> too, or just don't bother writing things in a pipeline, but with <code>Sequenecs</code> you can have your nice pipelines without all the extra intermediate allocations.</p><p>Here's a silly example.</p><p>In this case, I'm using the exception throwing versions.</p><pre><code class="ml">let () =
  Fasta_in_channel.with_file_exn name ~f:(fun chan -&gt;
      Fasta_in_channel.record_sequence_exn chan
      (* Add sequence index to record description *)
      |&gt; Sequence.mapi ~f:(fun i record -&gt;
             let new_desc =
               match Fasta_record.desc record with
               | None -&gt; Some (sprintf &quot;sequence %d&quot; i)
               | Some old_desc -&gt;
                   Some (sprintf &quot;%s -- sequence %d&quot; old_desc i)
             in
             Fasta_record.with_desc new_desc record)
      (* Convert all sequence chars to lowercase *)
      |&gt; Sequence.map ~f:(fun record -&gt;
             let new_seq = String.lowercase (Fasta_record.seq record) in
             Fasta_record.with_seq new_seq record)
      (* Print sequences *)
      |&gt; Sequence.iter ~f:(fun record -&gt;
             print_endline @@ Fasta_record.serialize record))</code></pre><p>One thing to watch out for though...if you get an exception half way through and you are running side-effecting code like we are here then part of your side effects will have occured and part of them will <i>not</i> have occured.</p><p>There are also <code>Or_error.t</code> flavors of the <code>sequence</code> functions. Just watch out because these you actually <i>do</i> have to deal with <code>Or_error.t</code> for each <code>Fasta_record.t</code> in the sequence.</p><p>As an alternative, you could use the <code>record_sequence_exn</code> function, but wrap <i>that</i> in the <code>with_file</code> function. That way you don't have to deal with the <code>Or_error.t</code> inside your pipeline. Instead you deal with it at the end.</p><pre><code class="ml">let total_length =
  match
    Fasta_in_channel.with_file name ~f:(fun chan -&gt;
        Fasta_in_channel.record_sequence_exn chan
        (* Blow up pipeline on second sequence. *)
        |&gt; Sequence.mapi ~f:(fun i record -&gt;
               if i = 1 then assert false;
               record)
        |&gt; Sequence.fold ~init:0 ~f:(fun length record -&gt;
               length + String.length (Fasta_record.seq record)))
  with
  | Error err -&gt;
      eprintf &quot;Problem in parsing pipeline: %s\n&quot;
        (Error.to_string_hum err);
      exit 1
  | Ok total_length -&gt; total_length</code></pre><p>As you can see, if that fasta file has more than one sequence it will hit the <code>assert false</code> and blow up.</p></header></section></section><section><header><h2 id="api"><a href="#api" class="anchor"></a>API</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec exception" id="exception-Exn"><a href="#exception-Exn" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Exn</span> <span class="keyword">of</span> Base.string</code></dt><dd><p>The only exception that logic introduced in this module will raise. Functions may raise other exceptions that occur &quot;outside&quot; of the module, like `Sys_error` when trying to open a file that doesn't exist.</p></dd></dl><section><header><h3 id="open/close"><a href="#open/close" class="anchor"></a>Open/Close</h3></header><dl><dt class="spec value" id="val-create_exn"><a href="#val-create_exn" class="anchor"></a><code><span class="keyword">val</span> create_exn : Base.string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create_exn filename</code> returns a <code>t</code> or raises an exception if the call fails.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : Base.string <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> Base.Or_error.t</span></code></dt><dd><p><code>create filename</code> returns a <code>t</code> or an <code>Error.t</code> if the call fails</p></dd></dl><dl><dt class="spec value" id="val-stdin_exn"><a href="#val-stdin_exn" class="anchor"></a><code><span class="keyword">val</span> stdin_exn : Base.unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>stdin_exn ()</code> returns a <code>t</code> or raises an exception if the call fails.</p></dd></dl><dl><dt class="spec value" id="val-stdin"><a href="#val-stdin" class="anchor"></a><code><span class="keyword">val</span> stdin : Base.unit <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> Base.Or_error.t</span></code></dt><dd><p><code>stdin ()</code> is like <code>stdin_exn</code> except that it returns an <code>Or_error.t</code> rather than raising exceptions on failure.</p></dd></dl><dl><dt class="spec value" id="val-close_exn"><a href="#val-close_exn" class="anchor"></a><code><span class="keyword">val</span> close_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Base.unit</code></dt><dd><p><code>close_exn t</code> closes the channel or raises an exception if the call fails.</p></dd></dl><dl><dt class="spec value" id="val-close"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>Base.unit Base.Or_error.t</span></code></dt><dd><p><code>close t</code> is like <code>close_exnt t</code> except that it returns an <code>Or_error.t</code> rather than raising an exception on failure.</p></dd></dl><dl><dt class="spec value" id="val-with_file_exn"><a href="#val-with_file_exn" class="anchor"></a><code><span class="keyword">val</span> with_file_exn : Base.string <span>&#45;&gt;</span> <span>f:<span>(<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>with_file_exn file_name ~f</code> executes <code>~f</code> on the channel created from <code>file_name</code> and closes it afterwards. May raise exceptions.</p></dd></dl><dl><dt class="spec value" id="val-with_file"><a href="#val-with_file" class="anchor"></a><code><span class="keyword">val</span> with_file : Base.string <span>&#45;&gt;</span> <span>f:<span>(<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Base.Or_error.t</span></code></dt><dd><p><code>with_file file_name ~f</code> is like <code>with_file_exn file_name ~f</code> except that it returns an <code>Or_error.t</code> rather than raising exceptions.</p></dd></dl></section><section><header><h3 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h3></header><dl><dt class="spec value" id="val-of_in_channel"><a href="#val-of_in_channel" class="anchor"></a><code><span class="keyword">val</span> of_in_channel : Stdio.In_channel.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_in_channel chan</code> converts an <code>In_channel.t</code> to a <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_in_channel"><a href="#val-to_in_channel" class="anchor"></a><code><span class="keyword">val</span> to_in_channel : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Stdio.In_channel.t</code></dt><dd><p><code>to_in_channel t</code> converts a <code>t</code> to an <code>In_channel.t</code>.</p></dd></dl><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Base.bool</code></dt><dd><p><code>equal t1 t2</code> compares two <code>t</code> for equality using <code>In_channel.equal</code>.</p></dd></dl><dl><dt class="spec value" id="val-peek_char"><a href="#val-peek_char" class="anchor"></a><code><span class="keyword">val</span> peek_char : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>Base.char Base.option</span></code></dt><dd><p><code>peek_char t</code> &quot;peeks&quot; the next <code>char</code> in the channel, then rewinds the channel back so the next read is not affected.</p></dd></dl><dl><dt class="spec value" id="val-rewind"><a href="#val-rewind" class="anchor"></a><code><span class="keyword">val</span> rewind : <span>?&#8288;pos:Base.Int64.t</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Base.unit</code></dt><dd><p><code>rewind ~pos t</code> seeks to the <code>pos</code> in the channel <code>t</code>. Default <code>~pos:0</code>, which means go back to the beginning of the channel.</p></dd></dl><dl><dt class="spec value" id="val-input_record_exn"><a href="#val-input_record_exn" class="anchor"></a><code><span class="keyword">val</span> input_record_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.Option.t</span></code></dt><dd><p><code>input_record_exn t</code> returns <code>Some Fasta_record.t</code> if there is any more. If there are no more records, <code>None</code> is returned. <code>Exn</code> is raised on bad input.</p></dd></dl><dl><dt class="spec value" id="val-input_record"><a href="#val-input_record" class="anchor"></a><code><span class="keyword">val</span> input_record : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.Option.t</span> Base.Or_error.t</span></code></dt><dd><p><code>input_record t</code> is like <code>input_record_exn t</code> except that it returns an <code>Or_error.t</code> rather than raising exceptions.</p></dd></dl></section><section><header><h3 id="getting_records"><a href="#getting_records" class="anchor"></a>Getting records</h3></header><section><header><h4 id="list_of_t"><a href="#list_of_t" class="anchor"></a>As list</h4></header><dl><dt class="spec value" id="val-records_exn"><a href="#val-records_exn" class="anchor"></a><code><span class="keyword">val</span> records_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.List.t</span></code></dt><dd><p><code>records_exn t</code> returns a list of <code>Fasta_record.t</code>. May raise exceptions.</p></dd></dl><dl><dt class="spec value" id="val-records"><a href="#val-records" class="anchor"></a><code><span class="keyword">val</span> records : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.List.t</span> Base.Or_error.t</span></code></dt><dd><p><code>records t</code> is like <code>records_exn t</code> except that it returns an <code>Or_error.t</code> and will not raise exceptions.</p></dd></dl><dl><dt class="spec value" id="val-with_file_records_exn"><a href="#val-with_file_records_exn" class="anchor"></a><code><span class="keyword">val</span> with_file_records_exn : Base.string <span>&#45;&gt;</span> <span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.List.t</span></code></dt><dd><p><code>with_file_records_exn file_name</code> is like <code>records_exn t</code> except that it takes a file name directly rather than taking a <code>Fasta_in_channel.t</code>. You can use this to avoid manually creating and closing an <code>t</code>, or to avoid wrapping the call in <a href="index.html#val-with_file"><code>with_file</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-with_file_records"><a href="#val-with_file_records" class="anchor"></a><code><span class="keyword">val</span> with_file_records : Base.string <span>&#45;&gt;</span> <span><span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.List.t</span> Base.Or_error.t</span></code></dt><dd><p><code>with_file_records file_name</code> is like <code>with_file_records_exn
   file_name</code> except that it returns an <code>Or_error.t</code> rather than raising exceptions.</p></dd></dl></section><section><header><h4 id="sequence_of_t"><a href="#sequence_of_t" class="anchor"></a>As sequence</h4><p>These are a bit different:</p><p>* There are no <code>with_file</code> versions as you would have to do some fiddly things to keep the channel open, making them not so nice to use.</p><p>* Each <code>Fasta_record.t</code> that is yielded is wrapped in an <code>Or_error.t</code>. This is different from the <code>iter</code>, <code>fold</code>, and other non <code>_exn</code> functions in which case the entire result is wrapped in an <code>Or_error.t</code>, letting you ignore errors in the passed in <code>~f</code> function and deal with failure once.</p></header><dl><dt class="spec value" id="val-record_sequence_exn"><a href="#val-record_sequence_exn" class="anchor"></a><code><span class="keyword">val</span> record_sequence_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.Sequence.t</span></code></dt><dd><p><code>record_sequence_exn t</code> returns a <code>Sequence.t</code> of <code>Fasta_record.t</code>. May raise exceptions.</p></dd></dl><dl><dt class="spec value" id="val-record_sequence"><a href="#val-record_sequence" class="anchor"></a><code><span class="keyword">val</span> record_sequence : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> Base.Or_error.t</span> Base.Sequence.t</span></code></dt><dd><p><code>record_sequence t</code> is like <code>record_sequence_exn t</code> except that instead of raising exceptions, each item of the sequence is a <code>Fasta_record.t Or_error.t</code> rather than an &quot;unwrapped&quot; <code>Fasta_record.t</code>. This could make things annoying to deal with. If you don't want exceptions, you could instead wrap your entire sequence processing pipeline in a call to <a href="index.html#val-with_file"><code>with_file</code></a> and handle the <code>Or_error.t</code> in that way. See the <a href="index.html#pipelines"><span>usage examples</span></a> for more info.</p></dd></dl></section></section><section><header><h3 id="folding"><a href="#folding" class="anchor"></a>Folding over records</h3></header><dl><dt class="spec value" id="val-fold_records_exn"><a href="#val-fold_records_exn" class="anchor"></a><code><span class="keyword">val</span> fold_records_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold_records_exn t ~init ~f</code> reduces all records from a <code>t</code> down to a single value of type <code>'a</code>. May raise exceptions.</p></dd></dl><dl><dt class="spec value" id="val-fold_records"><a href="#val-fold_records" class="anchor"></a><code><span class="keyword">val</span> fold_records : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Base.Or_error.t</span></code></dt><dd><p><code>fold_records t ~init ~f</code> is like <code>fold_records_exn t ~init ~f</code> except that it returns <code>'a Or_error.t</code> rather than <code>'a</code> and will not raise exceptions.</p></dd></dl><dl><dt class="spec value" id="val-with_file_fold_records_exn"><a href="#val-with_file_fold_records_exn" class="anchor"></a><code><span class="keyword">val</span> with_file_fold_records_exn : Base.string <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>with_file_fold_records_exn file_name ~init ~f</code> is like <code>fold_records_exn t ~init ~f</code> except that it takes the name of a fasta file directly rather than a <code>Fasta_in_channel.t</code>.</p></dd></dl><dl><dt class="spec value" id="val-with_file_fold_records"><a href="#val-with_file_fold_records" class="anchor"></a><code><span class="keyword">val</span> with_file_fold_records : Base.string <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Base.Or_error.t</span></code></dt><dd><p><code>with_file_fold_records file_name ~init ~f</code> is like <code>fold_records
   t ~init ~f</code> except that it takes the name of a fasta file directly rather than a <code>Fasta_in_channel.t</code>.</p></dd></dl><section><header><h4 id="with-index"><a href="#with-index" class="anchor"></a>With index</h4><p>These four functions are like their <a href="index.html#folding"><span><code>fold</code></span></a> counterparts except that the folding function <code>f</code> is also passed the index of the current record.</p></header><dl><dt class="spec value" id="val-foldi_records_exn"><a href="#val-foldi_records_exn" class="anchor"></a><code><span class="keyword">val</span> foldi_records_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-foldi_records"><a href="#val-foldi_records" class="anchor"></a><code><span class="keyword">val</span> foldi_records : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Base.Or_error.t</span></code></dt><dt class="spec value" id="val-with_file_foldi_records_exn"><a href="#val-with_file_foldi_records_exn" class="anchor"></a><code><span class="keyword">val</span> with_file_foldi_records_exn : Base.string <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-with_file_foldi_records"><a href="#val-with_file_foldi_records" class="anchor"></a><code><span class="keyword">val</span> with_file_foldi_records : Base.string <span>&#45;&gt;</span> <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Base.Or_error.t</span></code></dt></dl></section></section><section><header><h3 id="iter"><a href="#iter" class="anchor"></a>Iterating over records</h3><p>The <code>iter</code> functions are like the <a href="index.html#folding"><span><code>fold</code></span></a> functions except they do not take an <code>init</code> value and the <code>f</code> function returns <code>unit</code> insead of some other value <code>'a</code> (and thus return <code>unit</code> rather than a value <code>'a</code>.</p><p>They are mainly called for side effects.</p></header><dl><dt class="spec value" id="val-iter_records_exn"><a href="#val-iter_records_exn" class="anchor"></a><code><span class="keyword">val</span> iter_records_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>f:<span>(<a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> Base.unit</code></dt><dt class="spec value" id="val-iter_records"><a href="#val-iter_records" class="anchor"></a><code><span class="keyword">val</span> iter_records : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>f:<span>(<a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> <span>Base.unit Base.Or_error.t</span></code></dt><dt class="spec value" id="val-with_file_iter_records_exn"><a href="#val-with_file_iter_records_exn" class="anchor"></a><code><span class="keyword">val</span> with_file_iter_records_exn : Base.string <span>&#45;&gt;</span> <span>f:<span>(<a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> Base.unit</code></dt><dt class="spec value" id="val-with_file_iter_records"><a href="#val-with_file_iter_records" class="anchor"></a><code><span class="keyword">val</span> with_file_iter_records : Base.string <span>&#45;&gt;</span> <span>f:<span>(<a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> <span>Base.unit Base.Or_error.t</span></code></dt></dl><section><header><h4 id="with-index"><a href="#with-index" class="anchor"></a>With index</h4><p>The <code>iteri</code> variants are like the <a href="index.html#iter"><span><code>iter</code></span></a> functions except that the function <code>f</code> is passed in the index of the current record.</p></header><dl><dt class="spec value" id="val-iteri_records_exn"><a href="#val-iteri_records_exn" class="anchor"></a><code><span class="keyword">val</span> iteri_records_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> Base.unit</code></dt><dt class="spec value" id="val-iteri_records"><a href="#val-iteri_records" class="anchor"></a><code><span class="keyword">val</span> iteri_records : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> <span>Base.unit Base.Or_error.t</span></code></dt><dt class="spec value" id="val-with_file_iteri_records_exn"><a href="#val-with_file_iteri_records_exn" class="anchor"></a><code><span class="keyword">val</span> with_file_iteri_records_exn : Base.string <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> Base.unit</code></dt><dt class="spec value" id="val-with_file_iteri_records"><a href="#val-with_file_iteri_records" class="anchor"></a><code><span class="keyword">val</span> with_file_iteri_records : Base.string <span>&#45;&gt;</span> <span>f:<span>(Base.int <span>&#45;&gt;</span> <a href="../Fasta_record/index.html#type-t">Fasta_record.t</a> <span>&#45;&gt;</span> Base.unit)</span></span> <span>&#45;&gt;</span> <span>Base.unit Base.Or_error.t</span></code></dt></dl></section></section></section></div></body></html>